
> @tentai/vi-core@0.1.0 test
> vitest run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mE:/Tentai Ecosystem/core/vi[39m

[dotenv@17.2.3] injecting env (14) from .env -- tip: â‰¡Æ’Ã¶Ã‰ prevent committing .env to code: https://dotenvx.com/precommit
 Container vi-postgres  Running
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã¶Ã‰ encrypt with Dotenvx: https://dotenvx.com

 [32mÎ“Â£Ã´[39m tests/integration/phase-3.1-evaluation.test.ts [2m ([22m[2m39 tests[22m[2m)[22m[33m 384[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-3.3-console-integration.test.ts [2m ([22m[2m23 tests[22m[2m)[22m[90m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/presence.luxury.voice.e2e.test.ts [2m ([22m[2m61 tests[22m[2m)[22m[90m 15[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-2.2-verification.test.ts [2m ([22m[2m23 tests[22m[2m)[22m[33m 1019[2mms[22m[39m
[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould persist tone correction across sessions[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould change tone preference when user provides new correction[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould change tone preference when user provides new correction[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'elegant'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested elegant tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould track tone correction history[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould track tone correction history[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'elegant'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested elegant tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mTone Persistence[2m > [22m[2mshould track tone correction history[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'playful'[39m,
    confidence: [33m0.85[39m,
    reason: [32m'User requested playful tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould persist interaction mode across sessions[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould support mode switching[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould support mode switching[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'companion'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested companion mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist concise preference[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist no-apologies preference[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'no_apologies'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User corrected apology behavior'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist no-disclaimers preference[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'no_disclaimers'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User rejected disclaimers'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mRelationship Cue Persistence[2m > [22m[2mshould persist trusted cue[22m[39m
{
  correction: {
    type: [32m'relationship_cue'[39m,
    category: [32m'trusted'[39m,
    confidence: [33m0.75[39m,
    reason: [32m'User indicated existing relationship depth'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mRelationship Cue Persistence[2m > [22m[2mshould persist restricted cue[22m[39m
{
  correction: {
    type: [32m'relationship_cue'[39m,
    category: [32m'restricted'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested professional/formal mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mAudit Log[2m > [22m[2mshould maintain audit history of all corrections[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mAudit Log[2m > [22m[2mshould maintain audit history of all corrections[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mAudit Log[2m > [22m[2mshould maintain audit history of all corrections[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mAudit Log[2m > [22m[2mshould record reason in audit log[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mMulti-Preference Sessions[2m > [22m[2mshould persist multiple preferences together[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mMulti-Preference Sessions[2m > [22m[2mshould persist multiple preferences together[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mMulti-Preference Sessions[2m > [22m[2mshould persist multiple preferences together[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/preferences.persist.cross-session.e2e.test.ts[2m > [22m[2mPhase 3: Cross-Session Personality Persistence[2m > [22m[2mMulti-Preference Sessions[2m > [22m[2mshould persist multiple preferences together[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'no_apologies'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User corrected apology behavior'[39m
  }
} Applying preference correction

 [32mÎ“Â£Ã´[39m tests/preferences.persist.cross-session.e2e.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[33m 569[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  specify custom .env file path with { path: '/custom/path/.env' }

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould detect tone correction and persist to database[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould detect tone correction and persist to database[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould detect tone correction and persist to database[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274053234,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":227,"ip":"127.0.0.1","msg":"Request completed"}
(node:51216) [FSTDEP017] DeprecationWarning: You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.
(Use `node --trace-deprecation ...` to show where the warning was created)
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould load tone preference in subsequent session and apply it[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould load tone preference in subsequent session and apply it[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274053427,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/chat","statusCode":200,"duration":188,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould load tone preference in subsequent session and apply it[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274053595,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/chat","statusCode":200,"duration":165,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould update tone preference when user provides new correction[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

{"level":30,"time":1770274053772,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/chat","statusCode":200,"duration":172,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould update tone preference when user provides new correction[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'elegant'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested elegant tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mTone Preference Persistence[2m > [22m[2mshould update tone preference when user provides new correction[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274053926,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"POST","path":"/v1/chat","statusCode":200,"duration":152,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould persist interaction mode across sessions[22m[39m
{
  correction: {
    type: [32m'tone'[39m,
    category: [32m'direct'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested direct tone'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould persist interaction mode across sessions[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould persist interaction mode across sessions[22m[39m
Extracted 3 claims from response

{"level":30,"time":1770274054107,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/chat","statusCode":200,"duration":179,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould persist interaction mode across sessions[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274054246,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"POST","path":"/v1/chat","statusCode":200,"duration":136,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould switch interaction modes when user requests[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'operator'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested operator mode'[39m
  }
} Applying preference correction

{"level":30,"time":1770274054403,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"POST","path":"/v1/chat","statusCode":200,"duration":156,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould switch interaction modes when user requests[22m[39m
{
  correction: {
    type: [32m'mode'[39m,
    category: [32m'companion'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested companion mode'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mInteraction Mode Persistence[2m > [22m[2mshould switch interaction modes when user requests[22m[39m
Extracted 3 claims from response

{"level":30,"time":1770274054557,"pid":51216,"hostname":"Vi","requestId":"req-9","method":"POST","path":"/v1/chat","statusCode":200,"duration":152,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist concise response preference[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist concise response preference[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274054712,"pid":51216,"hostname":"Vi","requestId":"req-a","method":"POST","path":"/v1/chat","statusCode":200,"duration":154,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist verbose response preference[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'detailed'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested detailed responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mResponse Preference Persistence[2m > [22m[2mshould persist verbose response preference[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274054866,"pid":51216,"hostname":"Vi","requestId":"req-b","method":"POST","path":"/v1/chat","statusCode":200,"duration":151,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mCross-Provider Preference Isolation[2m > [22m[2mshould keep preferences separate for different providers[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'concise'[39m,
    confidence: [33m0.95[39m,
    reason: [32m'User requested concise responses'[39m
  }
} Applying preference correction

{"level":30,"time":1770274055023,"pid":51216,"hostname":"Vi","requestId":"req-c","method":"POST","path":"/v1/chat","statusCode":200,"duration":153,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mCross-Provider Preference Isolation[2m > [22m[2mshould keep preferences separate for different providers[22m[39m
{
  correction: {
    type: [32m'response_pref'[39m,
    category: [32m'detailed'[39m,
    confidence: [33m0.9[39m,
    reason: [32m'User requested detailed responses'[39m
  }
} Applying preference correction

[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mCross-Provider Preference Isolation[2m > [22m[2mshould keep preferences separate for different providers[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274055185,"pid":51216,"hostname":"Vi","requestId":"req-d","method":"POST","path":"/v1/chat","statusCode":200,"duration":161,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mPreference Audit Trail[2m > [22m[2mshould record all preference corrections in audit log[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274055334,"pid":51216,"hostname":"Vi","requestId":"req-e","method":"POST","path":"/v1/chat","statusCode":200,"duration":145,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mPreference Audit Trail[2m > [22m[2mshould record all preference corrections in audit log[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274055486,"pid":51216,"hostname":"Vi","requestId":"req-f","method":"POST","path":"/v1/chat","statusCode":200,"duration":152,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-3.http-preference-persistence.e2e.test.ts[2m > [22m[2mPhase 3: HTTP Cross-Session Preference Persistence[2m > [22m[2mPreference Audit Trail[2m > [22m[2mshould record all preference corrections in audit log[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274055621,"pid":51216,"hostname":"Vi","requestId":"req-g","method":"POST","path":"/v1/chat","statusCode":200,"duration":135,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/phase-3.http-preference-persistence.e2e.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[33m 4170[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-2.1-task-queue.test.ts [2m ([22m[2m25 tests[22m[2m)[22m[90m 227[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mBasic Pipeline Processing[2m > [22m[2mshould process input and return output with recordId[22m[39m
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mBasic Pipeline Processing[2m > [22m[2mshould include citations in result[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Basic Pipeline Processing > should process input and return output with recordId
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:60:22
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mBasic Pipeline Processing[2m > [22m[2mshould set recordId from run record store[22m[39m
Extracted 2 claims from response

      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Basic Pipeline Processing > should include citations in result
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mGrounding Integration[2m > [22m[2mshould extract claims from response[22m[39m
Extracted 2 claims from response

      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mGrounding Integration[2m > [22m[2mshould generate citations with confidence scores[22m[39m
Extracted 2 claims from response

      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:70:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Basic Pipeline Processing > should set recordId from run record store
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:79:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Grounding Integration > should extract claims from response
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:90:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Grounding Integration > should generate citations with confidence scores
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mGrounding Integration[2m > [22m[2mshould attach citations even if grounding partially fails[22m[39m
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:106:22
Extracted 2 claims from response
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)

      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Grounding Integration > should attach citations even if grounding partially fails
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:128:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mIntent Classification[2m > [22m[2mshould call intent classifier from LLM gateway[22m[39m
Extracted 2 claims from response

      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Intent Classification > should call intent classifier from LLM gateway
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:147:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mIntent Classification[2m > [22m[2mshould pass context to intent classifier[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Intent Classification > should pass context to intent classifier
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:157:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Response Generation > should call LLM gateway to generate response
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:166:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Response Generation > should include thought state in LLM call
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:174:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Response Generation > should return generated response text
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:187:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Memory Integration > should retrieve memories before response generation
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:197:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Memory Integration > should handle memory retrieval failures gracefully
Failed to retrieve memories: Error: Memory error
    at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:209:50
    at file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///E:/Tentai%20Ecosystem/core/vi/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:211:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mResponse Generation[2m > [22m[2mshould call LLM gateway to generate response[22m[39m
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mResponse Generation[2m > [22m[2mshould include thought state in LLM call[22m[39m
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mResponse Generation[2m > [22m[2mshould return generated response text[22m[39m
Extracted 1 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mMemory Integration[2m > [22m[2mshould retrieve memories before response generation[22m[39m
stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Memory Integration > should pass retrieved memories to thought context
Error in grounding validation {
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mMemory Integration[2m > [22m[2mshould handle memory retrieval failures gracefully[22m[39m
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:225:7
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mMemory Integration[2m > [22m[2mshould pass retrieved memories to thought context[22m[39m
Extracted 2 claims from response

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mContext Passing[2m > [22m[2mshould pass user context through pipeline[22m[39m
Extracted 2 claims from response

      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Context Passing > should pass user context through pipeline
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:242:7
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mContext Passing[2m > [22m[2mshould build thought state with userId and sessionId[22m[39m
Extracted 2 claims from response

      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Context Passing > should build thought state with userId and sessionId
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:252:7
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mRun Record Persistence[2m > [22m[2mshould save run record with assistant output[22m[39m
Extracted 1 claims from response

      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Run Record Persistence > should save run record with assistant output
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mRun Record Persistence[2m > [22m[2mshould include execution metadata in run record[22m[39m
Extracted 2 claims from response

      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:267:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Run Record Persistence > should include execution metadata in run record
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:279:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mError Handling[2m > [22m[2mshould handle run record save errors gracefully[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Error Handling > should handle run record save errors gracefully
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:311:9
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mError Handling[2m > [22m[2mshould not block on grounding check failures[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Error Handling > should not block on grounding check failures
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:321:7
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mCitation Attachment[2m > [22m[2mshould attach citations to result if available[22m[39m
Extracted 2 claims from response

      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mCitation Attachment[2m > [22m[2mshould not include citations if response has no claims[22m[39m
Extracted 1 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Citation Attachment > should attach citations to result if available
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:332:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Citation Attachment > should not include citations if response has no claims
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mCitation Attachment[2m > [22m[2mshould format citations with required fields[22m[39m
Extracted 2 claims from response

      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:377:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Citation Attachment > should format citations with required fields
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:386:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mFull Processing Flow[2m > [22m[2mshould complete full pipeline cycle[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Full Processing Flow > should complete full pipeline cycle
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:409:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

 [32mÎ“Â£Ã´[39m tests/integration/phase-2.3-pipeline-integration.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[90m 42[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.3-pipeline-integration.test.ts[2m > [22m[2mPhase 2.3: Pipeline Integration[2m > [22m[2mFull Processing Flow[2m > [22m[2mshould handle extended context with all fields[22m[39m
Extracted 2 claims from response

stderr | tests/integration/phase-2.3-pipeline-integration.test.ts > Phase 2.3: Pipeline Integration > Full Processing Flow > should handle extended context with all fields
Error in grounding validation {
  error: TypeError: this.memoryResolver.resolveFromMemory is not a function
      at GroundingGate.findSourcesForClaim (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:187:57)
      at GroundingGate.validateResponse (E:\Tentai Ecosystem\core\vi\src\brain\grounding\GroundingGate.ts:65:32)
      at E:\Tentai Ecosystem\core\vi\src\brain\pipeline.ts:375:24
      at Module.traceOperation (E:\Tentai Ecosystem\core\vi\src\telemetry\tracing.ts:104:20)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.3-pipeline-integration.test.ts:444:22
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runFiles (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:958:5)
}

 [32mÎ“Â£Ã´[39m tests/astralis.canon.enforcement.e2e.test.ts [2m ([22m[2m34 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/MissionMemory.test.ts [2m ([22m[2m18 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/clients.cross-consistency.e2e.test.ts [2m ([22m[2m25 tests[22m[2m)[22m[90m 64[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-3.2-basic-evaluator.test.ts [2m ([22m[2m25 tests[22m[2m)[22m[90m 7[2mms[22m[39m
(node:51216) [FSTDEP017] DeprecationWarning: You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.
(Use `node --trace-deprecation ...` to show where the warning was created)
{"level":30,"time":1770274056606,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":183,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274056616,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/identity/link","statusCode":201,"duration":6,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274056621,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"GET","path":"/v1/identity/map/00000000-0000-0000-0000-000000000001","statusCode":200,"duration":3,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274056627,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/chat","statusCode":200,"duration":5,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274056783,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"POST","path":"/v1/chat","statusCode":200,"duration":155,"ip":"127.0.0.1","msg":"Request completed"}
{
  correction: {
    type: 'tone',
    category: 'direct',
    confidence: 0.95,
    reason: 'User requested direct tone'
  }
} Applying preference correction
{
  correction: {
    type: 'response_pref',
    category: 'concise',
    confidence: 0.95,
    reason: 'User requested concise responses'
  }
} Applying preference correction
Extracted 3 claims from response
{"level":30,"time":1770274056960,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/chat","statusCode":200,"duration":163,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057099,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"POST","path":"/v1/chat","statusCode":200,"duration":138,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274057106,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"POST","path":"/v1/identity/link","statusCode":201,"duration":4,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057272,"pid":51216,"hostname":"Vi","requestId":"req-9","method":"POST","path":"/v1/chat","statusCode":200,"duration":151,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057416,"pid":51216,"hostname":"Vi","requestId":"req-a","method":"POST","path":"/v1/chat","statusCode":200,"duration":143,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057568,"pid":51216,"hostname":"Vi","requestId":"req-b","method":"POST","path":"/v1/chat","statusCode":200,"duration":147,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057713,"pid":51216,"hostname":"Vi","requestId":"req-c","method":"POST","path":"/v1/chat","statusCode":200,"duration":144,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057851,"pid":51216,"hostname":"Vi","requestId":"req-d","method":"POST","path":"/v1/chat","statusCode":200,"duration":137,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274057997,"pid":51216,"hostname":"Vi","requestId":"req-e","method":"POST","path":"/v1/chat","statusCode":200,"duration":145,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274058005,"pid":51216,"hostname":"Vi","requestId":"req-f","method":"POST","path":"/v1/chat","statusCode":200,"duration":7,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274058009,"pid":51216,"hostname":"Vi","requestId":"req-g","method":"POST","path":"/v1/chat","statusCode":200,"duration":3,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274058154,"pid":51216,"hostname":"Vi","requestId":"req-h","method":"POST","path":"/v1/chat","statusCode":200,"duration":144,"ip":"127.0.0.1","msg":"Request completed"}
Extracted 2 claims from response
{"level":30,"time":1770274058295,"pid":51216,"hostname":"Vi","requestId":"req-i","method":"POST","path":"/v1/chat","statusCode":200,"duration":139,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/77ez-acceptance.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[33m 1893[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  override existing env vars with { override: true }

[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mLore Mode Activation via Context[2m > [22m[2mshould accept lore_mode_request hint in context[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274058656,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":169,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mLore Mode Activation via Context[2m > [22m[2mshould auto-activate lore mode for canon entity queries[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274058809,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/chat","statusCode":200,"duration":152,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mCanon Resolution from Database[2m > [22m[2mshould use CanonResolverDB (not in-memory sample data)[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274058952,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/chat","statusCode":200,"duration":142,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mCanon Resolution from Database[2m > [22m[2mshould include citations from canon sources[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059091,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/chat","statusCode":200,"duration":138,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mVerse Rule Enforcement[2m > [22m[2mshould not hallucinate facts outside canon[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059230,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"POST","path":"/v1/chat","statusCode":200,"duration":138,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mVerse Rule Enforcement[2m > [22m[2mshould reject contradictions with existing canon[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059378,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/chat","statusCode":200,"duration":147,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mLore Mode Header Parsing[2m > [22m[2mshould ignore lore_mode_request if not in astralis context[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059517,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"POST","path":"/v1/chat","statusCode":200,"duration":139,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mLore Mode Header Parsing[2m > [22m[2mshould parse verbose hint and adjust response length[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059658,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"POST","path":"/v1/chat","statusCode":200,"duration":141,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274059797,"pid":51216,"hostname":"Vi","requestId":"req-9","method":"POST","path":"/v1/chat","statusCode":200,"duration":139,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mCross-Provider Lore Isolation[2m > [22m[2mshould allow Sovereign users to query canon but tag it differently[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274059945,"pid":51216,"hostname":"Vi","requestId":"req-a","method":"POST","path":"/v1/chat","statusCode":200,"duration":147,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mCross-Provider Lore Isolation[2m > [22m[2mshould prioritize canon for Astralis users[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274060088,"pid":51216,"hostname":"Vi","requestId":"req-b","method":"POST","path":"/v1/chat","statusCode":200,"duration":142,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060239,"pid":51216,"hostname":"Vi","requestId":"req-c","method":"POST","path":"/v1/chat","statusCode":200,"duration":151,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-4.canon-lore-http.e2e.test.ts[2m > [22m[2mPhase 4: Canon Integration via HTTP (Lore Mode)[2m > [22m[2mCanon Metadata in Response[2m > [22m[2mshould include canon entity references when cited[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274060379,"pid":51216,"hostname":"Vi","requestId":"req-d","method":"POST","path":"/v1/chat","statusCode":200,"duration":140,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/phase-4.canon-lore-http.e2e.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[33m 1918[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mMemoryResolver Basics[2m > [22m[2mshould resolve from memory when canon missing[22m[39m
Found 2 memory citations for query: "Tell me about Akima"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mMemoryResolver Basics[2m > [22m[2mshould respect minRelevance threshold[22m[39m
No memory found for query: "Any memories"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mMemoryResolver Basics[2m > [22m[2mshould query different memory dimensions[22m[39m
Found 2 memory citations for query: "query"
Found 1 memory citations for query: "query"
Found 1 memory citations for query: "query"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mMemoryResolver Basics[2m > [22m[2mshould return empty for non-existent user memory[22m[39m
No memory found for query: "query"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mCanon-First Fallback Strategy[2m > [22m[2mshould use canon when available[22m[39m
Found canon entity: Era3

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mCanon-First Fallback Strategy[2m > [22m[2mshould fall back to memory when canon missing[22m[39m
Found 2 memory citations for query: "Akima is important"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mCanon-First Fallback Strategy[2m > [22m[2mshould prefer canon over memory[22m[39m
Found canon entity: Era3
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mIntegrated Grounding with Memory[2m > [22m[2mshould validate response using memory when canon missing[22m[39m
Extracted 1 claims from response
Found 2 memory citations for query: "Akima is a character that appears in the books"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mIntegrated Grounding with Memory[2m > [22m[2mshould ground mixed canon and memory claims[22m[39m
Extracted 1 claims from response
Found 2 memory citations for query: "Era 3 is important, and Akima is a main character"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mIntegrated Grounding with Memory[2m > [22m[2mshould handle memory with varying confidence levels[22m[39m
Extracted 1 claims from response
Found 2 memory citations for query: "According to user memories, Akima recovered from poison"

 [32mÎ“Â£Ã´[39m tests/integration/phase-2.2-memory-integration.test.ts [2m ([22m[2m21 tests[22m[2m)[22m[90m 6[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mError Handling[2m > [22m[2mshould handle memory repository errors gracefully[22m[39m
No memory found for query: "test"

stderr | tests/integration/phase-2.2-memory-integration.test.ts > Phase 2.2: Memory Integration > Error Handling > should handle memory repository errors gracefully
Failed to search memory {
  error: Error: Database error
      at Object.mockMemoryRepository.getLongTermByUserId (E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.2-memory-integration.test.ts:371:15)
      at MemoryResolver.searchMemory (E:\Tentai Ecosystem\core\vi\src\brain\grounding\MemoryResolver.ts:83:49)
      at MemoryResolver.resolveFromMemory (E:\Tentai Ecosystem\core\vi\src\brain\grounding\MemoryResolver.ts:47:35)
      at E:\Tentai Ecosystem\core\vi\tests\integration\phase-2.2-memory-integration.test.ts:375:55
      at file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:135:14
      at file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:60:26
      at runTest (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:781:17)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///E:/Tentai%20Ecosystem/core/vi/node_modules/@vitest/runner/dist/index.js:909:15),
  userId: 'user-123'
}

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mError Handling[2m > [22m[2mshould handle null/undefined memory gracefully[22m[39m
No memory found for query: "test"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mIntegration Scenarios[2m > [22m[2mshould handle realistic user query with memory grounding[22m[39m
Extracted 3 claims from response
Found 2 memory citations for query: "Based on our previous conversations, Akima is your favorite character"
Found 2 memory citations for query: "She appears in Era 3 timeline and is known for strategic thinking"
Found 2 memory citations for query: "Valeric was also mentioned as a warrior during that period"

[90mstdout[2m | tests/integration/phase-2.2-memory-integration.test.ts[2m > [22m[2mPhase 2.2: Memory Integration[2m > [22m[2mIntegration Scenarios[2m > [22m[2mshould differentiate between well-grounded and ungrounded mixed claims[22m[39m
Extracted 1 claims from response
Found 2 memory citations for query: "Era 3 is when Akima made her greatest achievements"
Extracted 1 claims from response
Found 2 memory citations for query: "Era 3 had sentient robots and advanced AI (not in canon or memory)"

 [32mÎ“Â£Ã´[39m tests/behavior-rules.e2e.test.ts [2m ([22m[2m23 tests[22m[2m)[22m[90m 4[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mCitation Finding[2m > [22m[2mshould find citations for canon entities[22m[39m
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mResponse Validation[2m > [22m[2mshould mark fully grounded responses as passed[22m[39m
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mResponse Validation[2m > [22m[2mshould block responses with too many ungrounded claims (strict mode)[22m[39m
Extracted 4 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mResponse Validation[2m > [22m[2mshould warn on low confidence[22m[39m
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mResponse Validation[2m > [22m[2mshould handle uncertainty statements appropriately[22m[39m
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mCanonResolver[2m > [22m[2mshould resolve canon entities with high confidence[22m[39m
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mCitation Deduplication[2m > [22m[2mshould deduplicate identical citations[22m[39m
Extracted 2 claims from response
Found canon entity: Akima
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mGrounded Response Creation[2m > [22m[2mshould create grounded response with citations[22m[39m
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mGrounded Response Creation[2m > [22m[2mshould mark uncertain responses appropriately[22m[39m
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mGrounded Response Creation[2m > [22m[2mshould include warnings for ungrounded claims[22m[39m
Extracted 2 claims from response
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty response text[22m[39m
Extracted 0 claims from response

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle null/undefined context gracefully[22m[39m
Extracted 0 claims from response

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle very long responses[22m[39m
Extracted 1000 claims from response
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima
Found canon entity: Akima

[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mIntegration Tests[2m > [22m[2mshould validate a realistic chat response[22m[39m
Extracted 5 claims from response
Found canon entity: Akima

 [32mÎ“Â£Ã´[39m tests/integration/phase-2.1-grounding-gate.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[90m 12[2mms[22m[39m
[90mstdout[2m | tests/integration/phase-2.1-grounding-gate.test.ts[2m > [22m[2mPhase 2.1: Grounding Gate[2m > [22m[2mIntegration Tests[2m > [22m[2mshould differentiate between fully grounded and partially grounded responses[22m[39m
Extracted 1 claims from response
Found canon entity: Akima
Extracted 1 claims from response
Found canon entity: Akima

[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã¶Ã‰ prevent building .env in docker: https://dotenvx.com/prebuild

{"level":30,"time":1770274060705,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"GET","path":"/v1/admin/users","statusCode":403,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060721,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"GET","path":"/v1/admin/users","statusCode":200,"duration":15,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060723,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"GET","path":"/v1/admin/users?limit=2&offset=0","statusCode":200,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060724,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"GET","path":"/v1/admin/users?limit=2&offset=2","statusCode":200,"duration":0,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060736,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"GET","path":"/v1/admin/users","statusCode":200,"duration":11,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060737,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"GET","path":"/v1/admin/sessions","statusCode":403,"duration":0,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060752,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"GET","path":"/v1/admin/sessions","statusCode":200,"duration":15,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060754,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"GET","path":"/v1/admin/sessions?limit=1&offset=0","statusCode":200,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060756,"pid":51216,"hostname":"Vi","requestId":"req-9","method":"GET","path":"/v1/admin/sessions?limit=1&offset=1","statusCode":200,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060758,"pid":51216,"hostname":"Vi","requestId":"req-a","method":"GET","path":"/v1/admin/sessions","statusCode":200,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060761,"pid":51216,"hostname":"Vi","requestId":"req-b","method":"GET","path":"/v1/admin/sessions","statusCode":200,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060764,"pid":51216,"hostname":"Vi","requestId":"req-c","method":"GET","path":"/v1/admin/sessions","statusCode":200,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060765,"pid":51216,"hostname":"Vi","requestId":"req-d","method":"GET","path":"/v1/admin/users","statusCode":200,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060770,"pid":51216,"hostname":"Vi","requestId":"req-e","method":"GET","path":"/v1/admin/users","statusCode":200,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274060781,"pid":51216,"hostname":"Vi","requestId":"req-f","method":"GET","path":"/v1/admin/sessions","statusCode":200,"duration":3,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/phase-1.2-admin-endpoints.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 133[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-0.1-event-integrity.test.ts [2m ([22m[2m12 tests[22m[2m)[22m[90m 260[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/tools.test.ts [2m ([22m[2m23 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/phase-1.1-memory-injection.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[33m 5132[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/MemoryOrchestrator.test.ts [2m ([22m[2m13 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[33m 370[2mms[22m[39m
[31m   [33mÎ“Â¥Â»[31m tests/MemoryOrchestrator.test.ts[2m > [22mMemoryOrchestrator[2m > [22mbuildContinuityPack[2m > [22mshould include user profile data[39m
[31m     Î“Ã¥Ã† expected 'public' to be 'trusted' // Object.is equality[39m
[31m   [33mÎ“Â¥Â»[31m tests/MemoryOrchestrator.test.ts[2m > [22mMemoryOrchestrator[2m > [22mbuildContinuityPack[2m > [22mshould return minimal pack on error[39m
[31m     Î“Ã¥Ã† expected 'public' to be 'normal' // Object.is equality[39m
[31m   [33mÎ“Â¥Â»[31m tests/MemoryOrchestrator.test.ts[2m > [22mMemoryOrchestrator[2m > [22mCross-Session Continuity[2m > [22mshould persist preferences across sessions[39m
[31m     Î“Ã¥Ã† expected 'default' to be 'mentor' // Object.is equality[39m
 [32mÎ“Â£Ã´[39m tests/CanonInjector.test.ts [2m ([22m[2m19 tests[22m[2m)[22m[90m 4[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/identity.cross-client.e2e.test.ts [2m ([22m[2m10 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 170[2mms[22m[39m
[31m   [33mÎ“Â¥Â»[31m tests/identity.cross-client.e2e.test.ts[2m > [22mIdentityResolver (Phase 1)[2m > [22mgetLinkedProviders[2m > [22mshould return all providers for a user[39m
[31m     Î“Ã¥Ã† duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"[39m
[31m   [33mÎ“Â¥Â»[31m tests/identity.cross-client.e2e.test.ts[2m > [22mIdentityResolver (Phase 1)[2m > [22mlinkProvider[2m > [22mshould link new provider to existing user[39m
[31m     Î“Ã¥Ã† duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"[39m
[31m   [33mÎ“Â¥Â»[31m tests/identity.cross-client.e2e.test.ts[2m > [22mIdentityResolver (Phase 1)[2m > [22munlinkProvider[2m > [22mshould unlink provider from user[39m
[31m     Î“Ã¥Ã† duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"[39m
[31m   [33mÎ“Â¥Â»[31m tests/identity.cross-client.e2e.test.ts[2m > [22mIdentityResolver (Phase 1)[2m > [22mCross-Client Memory Consistency[2m > [22mshould return same vi_user_id for Discord and Sovereign users[39m
[31m     Î“Ã¥Ã† duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"[39m
 [32mÎ“Â£Ã´[39m tests/unit/reflection.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 1[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã´Ã­ add observability to secrets: https://dotenvx.com/ops

[90mstdout[2m | tests/integration/chat.e2e.test.ts[2m > [22m[2m/v1/chat Endpoint[2m > [22m[2mshould handle chat request and return response[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274068375,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":168,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/chat.e2e.test.ts[2m > [22m[2m/v1/chat Endpoint[2m > [22m[2mshould accept sessionId and resume session[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274068526,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/chat","statusCode":200,"duration":149,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/chat.e2e.test.ts[2m > [22m[2m/v1/chat Endpoint[2m > [22m[2mshould accept sessionId and resume session[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274068674,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/chat","statusCode":200,"duration":148,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274068814,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/chat","statusCode":200,"duration":139,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274068816,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"POST","path":"/v1/chat","statusCode":400,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274068817,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/chat","statusCode":400,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/chat.e2e.test.ts[2m > [22m[2m/v1/chat Endpoint[2m > [22m[2mshould accept context with recentHistory[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274068975,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"POST","path":"/v1/chat","statusCode":200,"duration":158,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/chat.e2e.test.ts[2m > [22m[2m/v1/chat Endpoint[2m > [22m[2mshould accept context with userPreferences[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274069127,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"POST","path":"/v1/chat","statusCode":200,"duration":151,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/chat.e2e.test.ts [2m ([22m[2m7 tests[22m[2m)[22m[33m 1899[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/schema-contract.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 59[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | tests/integration/phase-7.cross-client-http.e2e.test.ts[2m > [22m[2mPhase 7: Cross-Client Identity via HTTP[2m > [22m[2mpersists provider identity from Sovereign headers and reuses vi_user_id[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274070450,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":209,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-7.cross-client-http.e2e.test.ts[2m > [22m[2mPhase 7: Cross-Client Identity via HTTP[2m > [22m[2mpersists provider identity from Sovereign headers and reuses vi_user_id[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274070767,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/chat","statusCode":200,"duration":302,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274070912,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/chat","statusCode":200,"duration":142,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274071080,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/chat","statusCode":200,"duration":168,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-7.cross-client-http.e2e.test.ts[2m > [22m[2mPhase 7: Cross-Client Identity via HTTP[2m > [22m[2mdoes not record identity audit trail for repeated resolution without state change[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274071300,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"POST","path":"/v1/chat","statusCode":200,"duration":216,"ip":"127.0.0.1","msg":"Request completed"}
[90mstdout[2m | tests/integration/phase-7.cross-client-http.e2e.test.ts[2m > [22m[2mPhase 7: Cross-Client Identity via HTTP[2m > [22m[2mdoes not record identity audit trail for repeated resolution without state change[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274071445,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/chat","statusCode":200,"duration":144,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/phase-7.cross-client-http.e2e.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[33m 2052[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/AmbiguityGate.test.ts [2m ([22m[2m15 tests[22m[2m)[22m[90m 2[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  load multiple .env files with { path: ['.env.local', '.env'] }

{"level":30,"time":1770274072563,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/auth/register","statusCode":201,"duration":118,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072637,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/auth/login","statusCode":200,"duration":73,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072648,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/conversations","statusCode":201,"duration":10,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072652,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/conversations/0521b1f0-da59-4c73-a41b-978bea7982a1/messages","statusCode":201,"duration":4,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072655,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"GET","path":"/v1/conversations/0521b1f0-da59-4c73-a41b-978bea7982a1/messages","statusCode":200,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072671,"pid":51216,"hostname":"Vi","requestId":"req-6","method":"POST","path":"/v1/auth/refresh","statusCode":200,"duration":15,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072674,"pid":51216,"hostname":"Vi","requestId":"req-7","method":"POST","path":"/v1/auth/logout","statusCode":200,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274072677,"pid":51216,"hostname":"Vi","requestId":"req-8","method":"POST","path":"/v1/auth/refresh","statusCode":401,"duration":2,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/auth.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 1024[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã¶Ã¤ add secrets lifecycle management: https://dotenvx.com/ops

 [32mÎ“Â£Ã´[39m tests/integration/codex.service.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[33m 394[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  enable debug logging with { debug: true }

[90mstdout[2m | tests/integration/tool.grounding.e2e.test.ts[2m > [22m[2mTool Grounding[2m > [22m[2mshould include tool output in final response when tool is invoked[22m[39m
Extracted 2 claims from response

 [32mÎ“Â£Ã´[39m tests/integration/tool.grounding.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 11527[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/memory.consolidation.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 2[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  write to custom object with { processEnv: myObject }

{"level":30,"time":1770274085041,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"GET","path":"/v1/health","statusCode":200,"duration":0,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274085053,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"GET","path":"/nonexistent","statusCode":404,"duration":1,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/unit/infrastructure.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 35[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  write to custom object with { processEnv: myObject }

[90mstdout[2m | tests/integration/cognition.e2e.test.ts[2m > [22m[2mCognition Pipeline[2m > [22m[2mprocesses a query through the full cognition pipeline[22m[39m
Extracted 1 claims from response

[90mstdout[2m | tests/integration/cognition.e2e.test.ts[2m > [22m[2mCognition Pipeline[2m > [22m[2mclassifies intent correctly for different input types[22m[39m
Extracted 2 claims from response

[90mstdout[2m | tests/integration/cognition.e2e.test.ts[2m > [22m[2mCognition Pipeline[2m > [22m[2mclassifies intent correctly for different input types[22m[39m
Extracted 2 claims from response

 [32mÎ“Â£Ã´[39m tests/integration/cognition.e2e.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[33m 35615[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/unit/relationship_resolver.locked_fact_override.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 30[2mms[22m[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.locked_fact_override.test.ts[2m > [22mRelationshipResolver - Locked Fact Override[2m > [22mlocked fact overrides database relationship_type to owner[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.locked_fact_override.test.ts[2m > [22mRelationshipResolver - Locked Fact Override[2m > [22mlocked fact overrides database relationship_type to public (downgrade)[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.locked_fact_override.test.ts[2m > [22mRelationshipResolver - Locked Fact Override[2m > [22mignores non-locked facts for relationship_type[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
 [32mÎ“Â£Ã´[39m tests/unit/policy.engine.test.ts [2m ([22m[2m11 tests[22m[2m)[22m[33m 1174[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã¦Ã‘ sync secrets across teammates & machines: https://dotenvx.com/ops

{"level":30,"time":1770274123029,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/auth/register","statusCode":201,"duration":59,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274123084,"pid":51216,"hostname":"Vi","requestId":"req-2","method":"POST","path":"/v1/auth/login","statusCode":200,"duration":55,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274123088,"pid":51216,"hostname":"Vi","requestId":"req-3","method":"POST","path":"/v1/conversations","statusCode":201,"duration":3,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274123093,"pid":51216,"hostname":"Vi","requestId":"req-4","method":"POST","path":"/v1/conversations/e444a225-672b-43d6-bea2-4156be831c37/messages","statusCode":201,"duration":5,"ip":"127.0.0.1","msg":"Request completed"}
{"level":30,"time":1770274123096,"pid":51216,"hostname":"Vi","requestId":"req-5","method":"GET","path":"/v1/conversations/e444a225-672b-43d6-bea2-4156be831c37/messages","statusCode":200,"duration":3,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/conversations.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 891[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/integration/policy.denial.e2e.test.ts [2m ([22m[2m5 tests[22m[2m)[22m[90m 42[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  specify custom .env file path with { path: '/custom/path/.env' }

{"level":30,"time":1770274124219,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat/stream","statusCode":200,"duration":36,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/e2e.stream.ambiguitygate_short_circuit.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 880[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/relationship.owner-vs-public.e2e.test.ts [2m ([22m[2m4 tests[22m[2m)[22m[33m 754[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/e2e/relationship.owner_vs_public.posture.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33mÎ“Â¥Â»[39m tests/integration/relationship_context_in_continuitypack.test.ts [2m ([22m[2m4 tests[22m[2m)[22m[90m 12[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“Â£Ã  audit secrets and track compliance: https://dotenvx.com/ops

 [32mÎ“Â£Ã´[39m tests/integration/memory.consolidation.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 915[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/unit/relationship_resolver.guarded_overrides_owner.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 32[2mms[22m[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.guarded_overrides_owner.test.ts[2m > [22mRelationshipResolver - Guarded Mode Override[2m > [22mguarded mode overrides owner -> public_elegant + neutral[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.guarded_overrides_owner.test.ts[2m > [22mRelationshipResolver - Guarded Mode Override[2m > [22mguarded mode overrides public (idempotent)[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.guarded_overrides_owner.test.ts[2m > [22mRelationshipResolver - Guarded Mode Override[2m > [22mdefault (non-guarded) mode allows owner_luxury[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
 [33mÎ“Â¥Â»[39m tests/e2e/relationship.no_relational_escalation_public.test.ts [2m ([22m[2m4 tests[22m[2m)[22m[90m 22[2mms[22m[39m
 [33mÎ“Â¥Â»[39m tests/unit/relationship_resolver.defaults.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 30[2mms[22m[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.defaults.test.ts[2m > [22mRelationshipResolver - Defaults[2m > [22mcreates default public relationship for new user[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.defaults.test.ts[2m > [22mRelationshipResolver - Defaults[2m > [22mreturns existing relationship for existing user[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[31m   [33mÎ“Â¥Â»[31m tests/unit/relationship_resolver.defaults.test.ts[2m > [22mRelationshipResolver - Defaults[2m > [22mvalidates trust_level is clamped 0-100[39m
[31m     Î“Ã¥Ã† database "vi_test" does not exist[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Ã¶Ã‰ encrypt with Dotenvx: https://dotenvx.com

{"level":30,"time":1770274127744,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":522,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/e2e.chat.ambiguitygate_short_circuit.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 1321[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: â‰¡Æ’Â¢Ã¡âˆ©â••Ã…  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | tests/integration/citations.persist.e2e.test.ts[2m > [22m[2mcitations persistence[2m > [22m[2mpersists citations to DB and returns them[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274128949,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat","statusCode":200,"duration":167,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/citations.persist.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 961[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/repositories.test.ts [2m ([22m[2m4 tests[22m[2m)[22m[90m 1[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | tests/integration/chat.stream.e2e.test.ts[2m > [22m[2m/v1/chat/stream Endpoint[2m > [22m[2mstreams cognition events and final response[22m[39m
Extracted 2 claims from response

{"level":30,"time":1770274130052,"pid":51216,"hostname":"Vi","requestId":"req-1","method":"POST","path":"/v1/chat/stream","statusCode":200,"duration":42,"ip":"127.0.0.1","msg":"Request completed"}
 [32mÎ“Â£Ã´[39m tests/integration/chat.stream.e2e.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 911[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/branching.planner.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/tools/SearchMemory.test.ts [2m ([22m[2m5 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/validation.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/verified.actions.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/eventBus.autonomy.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 127[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/userFacts.repository.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/backtracking.executor.test.ts [2m ([22m[2m2 tests[22m[2m)[22m
 [32mÎ“Â£Ã´[39m tests/integration/integration.pipeline.ambiguitygate_event.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/pipeline.continuity.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/constraint.solver.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/planner.authority.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
[90mstdout[2m | _log (E:\Tentai Ecosystem\core\vi\node_modules\dotenv\lib\main.js:142:11)[22m[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: Î“ÃœÃ–âˆ©â••Ã…  suppress all logs with { quiet: true }

 [32mÎ“Â£Ã´[39m tests/unit/config.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/planning.schema.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/memory.consolidation.boundary.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 1[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/providers.config.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 1[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Suites 3 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  tests/e2e/relationship.no_relational_escalation_public.test.ts > E2E: No Relational Escalation (Public Mode)
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» tests/e2e/relationship.no_relational_escalation_public.test.ts:29:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/21]Î“Ã„Â»

 FAIL  tests/e2e/relationship.no_relational_escalation_public.test.ts > E2E: No Relational Escalation (Public Mode)
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.delete src/repository/UserRelationshipRepository.ts:157:5
    155|    */
    156|   async delete(vi_user_id: string): Promise<void> {
    157|     await this.pool.query(
       |     ^
    158|       `DELETE FROM user_relationships WHERE vi_user_id = $1`,
    159|       [vi_user_id]
 Î“Â¥Â» tests/e2e/relationship.no_relational_escalation_public.test.ts:33:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/21]Î“Ã„Â»

 FAIL  tests/e2e/relationship.owner_vs_public.posture.test.ts [ tests/e2e/relationship.owner_vs_public.posture.test.ts ]
Error: Failed to load url ../helpers/continuityMocks.js (resolved id: ../helpers/continuityMocks.js) in E:/Tentai Ecosystem/core/vi/tests/e2e/relationship.owner_vs_public.posture.test.ts. Does the file exist?
 Î“Â¥Â» loadAndTransform ../../../Tentai%20Ecosystem/core/vi/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/21]Î“Ã„Â»

 FAIL  tests/integration/relationship_context_in_continuitypack.test.ts > Integration: Relationship Context in ContinuityPack
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» Module.runMigrations src/db/migrations.ts:1416:3
    1414|   const logger = getLogger();
    1415| 
    1416|   await pool.query(`
       |   ^
    1417|     CREATE TABLE IF NOT EXISTS applied_migrations (
    1418|       id TEXT PRIMARY KEY,
 Î“Â¥Â» tests/integration/relationship_context_in_continuitypack.test.ts:29:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/21]Î“Ã„Â»

 FAIL  tests/integration/relationship_context_in_continuitypack.test.ts > Integration: Relationship Context in ContinuityPack
TypeError: Cannot read properties of undefined (reading 'delete')
 Î“Â¥Â» tests/integration/relationship_context_in_continuitypack.test.ts:36:28
     34| 
     35|   afterAll(async () => {
     36|     await relationshipRepo.delete(testUserId);
       |                            ^
     37|     await pool.end();
     38|   });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[5/21]Î“Ã„Â»

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 16 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  tests/identity.cross-client.e2e.test.ts > IdentityResolver (Phase 1) > getLinkedProviders > should return all providers for a user
error: duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» tests/identity.cross-client.e2e.test.ts:91:7
     89|       );
     90| 
     91|       await pool.query(
       |       ^
     92|         `INSERT INTO user_identity_map (vi_user_id, provider, providerÎ“Ã‡Âª
     93|         VALUES ($1, $2, $3)`,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 293, severity: 'ERROR', code: '23505', detail: 'Key (vi_user_id)=(4be0b0b2-c65b-492f-889d-89d1cb437a7a) already exists.', hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: 'public', table: 'user_identity_map', column: undefined, dataType: undefined, constraint: 'idx_user_identity_map_vi_user_id_unique', file: 'nbtinsert.c', line: '666', routine: '_bt_check_unique' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[6/21]Î“Ã„Â»

 FAIL  tests/identity.cross-client.e2e.test.ts > IdentityResolver (Phase 1) > linkProvider > should link new provider to existing user
error: duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» IdentityResolver.linkProvider src/identity/IdentityResolver.ts:188:22
    186| 
    187|       const metadata = context.metadata || {};
    188|       const result = await this.pool.query<ResolvedIdentity>(
       |                      ^
    189|         `INSERT INTO user_identity_map (vi_user_id, provider, providerÎ“Ã‡Âª
    190|         VALUES ($1, $2, $3, $4)
 Î“Â¥Â» tests/identity.cross-client.e2e.test.ts:126:22

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 293, severity: 'ERROR', code: '23505', detail: 'Key (vi_user_id)=(185f10ce-4ff2-4ea4-94bb-04a0dce50b97) already exists.', hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: 'public', table: 'user_identity_map', column: undefined, dataType: undefined, constraint: 'idx_user_identity_map_vi_user_id_unique', file: 'nbtinsert.c', line: '666', routine: '_bt_check_unique' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[7/21]Î“Ã„Â»

 FAIL  tests/identity.cross-client.e2e.test.ts > IdentityResolver (Phase 1) > unlinkProvider > should unlink provider from user
error: duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» tests/identity.cross-client.e2e.test.ts:175:7
    173|       );
    174| 
    175|       await pool.query(
       |       ^
    176|         `INSERT INTO user_identity_map (vi_user_id, provider, providerÎ“Ã‡Âª
    177|         VALUES ($1, $2, $3)`,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 293, severity: 'ERROR', code: '23505', detail: 'Key (vi_user_id)=(d4d74e45-1d2e-49ed-9165-a742e412383a) already exists.', hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: 'public', table: 'user_identity_map', column: undefined, dataType: undefined, constraint: 'idx_user_identity_map_vi_user_id_unique', file: 'nbtinsert.c', line: '666', routine: '_bt_check_unique' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[8/21]Î“Ã„Â»

 FAIL  tests/identity.cross-client.e2e.test.ts > IdentityResolver (Phase 1) > Cross-Client Memory Consistency > should return same vi_user_id for Discord and Sovereign users
error: duplicate key value violates unique constraint "idx_user_identity_map_vi_user_id_unique"
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» IdentityResolver.linkProvider src/identity/IdentityResolver.ts:188:22
    186| 
    187|       const metadata = context.metadata || {};
    188|       const result = await this.pool.query<ResolvedIdentity>(
       |                      ^
    189|         `INSERT INTO user_identity_map (vi_user_id, provider, providerÎ“Ã‡Âª
    190|         VALUES ($1, $2, $3, $4)
 Î“Â¥Â» tests/identity.cross-client.e2e.test.ts:260:33

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 293, severity: 'ERROR', code: '23505', detail: 'Key (vi_user_id)=(7a9b7050-d635-4418-b633-7d4f18fb3ae9) already exists.', hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: 'public', table: 'user_identity_map', column: undefined, dataType: undefined, constraint: 'idx_user_identity_map_vi_user_id_unique', file: 'nbtinsert.c', line: '666', routine: '_bt_check_unique' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[9/21]Î“Ã„Â»

 FAIL  tests/MemoryOrchestrator.test.ts > MemoryOrchestrator > buildContinuityPack > should include user profile data
AssertionError: expected 'public' to be 'trusted' // Object.is equality

- Expected
+ Received

- trusted
+ public

 Î“Â¥Â» tests/MemoryOrchestrator.test.ts:81:38
     79|       const pack = await orchestrator.buildContinuityPack(userId);
     80| 
     81|       expect(pack.relationship_type).toBe('trusted');
       |                                      ^
     82|       expect(pack.trust_level).toBe(0.75);
     83|     });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[10/21]Î“Ã„Â»

 FAIL  tests/MemoryOrchestrator.test.ts > MemoryOrchestrator > buildContinuityPack > should return minimal pack on error
AssertionError: expected 'public' to be 'normal' // Object.is equality

- Expected
+ Received

- normal
+ public

 Î“Â¥Â» tests/MemoryOrchestrator.test.ts:142:38
    140|       const pack = await orchestrator.buildContinuityPack('00000000-00Î“Ã‡Âª
    141| 
    142|       expect(pack.relationship_type).toBe('normal');
       |                                      ^
    143|       expect(pack.trust_level).toBe(0);
    144|       expect(pack.working_memory).toEqual([]);

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[11/21]Î“Ã„Â»

 FAIL  tests/MemoryOrchestrator.test.ts > MemoryOrchestrator > Cross-Session Continuity > should persist preferences across sessions
AssertionError: expected 'default' to be 'mentor' // Object.is equality

- Expected
+ Received

- mentor
+ default

 Î“Â¥Â» tests/MemoryOrchestrator.test.ts:296:37
    294| 
    295|       expect(pack.tone_preference).toBe('friendly');
    296|       expect(pack.interaction_mode).toBe('mentor');
       |                                     ^
    297|     });
    298| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[12/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.defaults.test.ts > RelationshipResolver - Defaults > creates default public relationship for new user
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.defaults.test.ts:38:21

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[13/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.defaults.test.ts > RelationshipResolver - Defaults > returns existing relationship for existing user
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.defaults.test.ts:57:22

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[14/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.defaults.test.ts > RelationshipResolver - Defaults > validates trust_level is clamped 0-100
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.defaults.test.ts:73:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[15/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.guarded_overrides_owner.test.ts > RelationshipResolver - Guarded Mode Override > guarded mode overrides owner -> public_elegant + neutral
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.guarded_overrides_owner.test.ts:37:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[16/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.guarded_overrides_owner.test.ts > RelationshipResolver - Guarded Mode Override > guarded mode overrides public (idempotent)
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.guarded_overrides_owner.test.ts:62:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[17/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.guarded_overrides_owner.test.ts > RelationshipResolver - Guarded Mode Override > default (non-guarded) mode allows owner_luxury
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.guarded_overrides_owner.test.ts:84:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[18/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.locked_fact_override.test.ts > RelationshipResolver - Locked Fact Override > locked fact overrides database relationship_type to owner
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.locked_fact_override.test.ts:38:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[19/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.locked_fact_override.test.ts > RelationshipResolver - Locked Fact Override > locked fact overrides database relationship_type to public (downgrade)
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.locked_fact_override.test.ts:76:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[20/21]Î“Ã„Â»

 FAIL  tests/unit/relationship_resolver.locked_fact_override.test.ts > RelationshipResolver - Locked Fact Override > ignores non-locked facts for relationship_type
error: database "vi_test" does not exist
 Î“Â¥Â» node_modules/pg-pool/index.js:45:11
 Î“Â¥Â» UserRelationshipRepository.getOrCreateDefault src/repository/UserRelationshipRepository.ts:33:28
     31|   }> {
     32|     // Try to get existing row
     33|     const existingResult = await this.pool.query<UserRelationshipRow>(
       |                            ^
     34|       `SELECT * FROM user_relationships WHERE vi_user_id = $1`,
     35|       [vi_user_id]
 Î“Â¥Â» RelationshipResolver.resolveRelationship src/brain/cognition/RelationshipResolver.ts:82:34
 Î“Â¥Â» tests/unit/relationship_resolver.locked_fact_override.test.ts:115:5

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { length: 93, severity: 'FATAL', code: '3D000', detail: undefined, hint: undefined, position: undefined, internalPosition: undefined, internalQuery: undefined, where: undefined, schema: undefined, table: undefined, column: undefined, dataType: undefined, constraint: undefined, file: 'postinit.c', line: '1019', routine: 'InitPostgres' }
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[21/21]Î“Ã„Â»

[2m Test Files [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m58 passed[39m[22m[90m (66)[39m
[2m      Tests [22m [1m[31m16 failed[39m[22m[2m | [22m[1m[32m661 passed[39m[22m[90m (685)[39m
[2m   Start at [22m 00:46:37
[2m   Duration [22m 133.71s[2m (transform 7.65s, setup 0ms, collect 23.47s, tests 77.16s, environment 1ms, prepare 1.87s)[22m

close timed out after 10000ms
Tests closed successfully but something prevents Vite server from exiting
You can try to identify the cause by enabling "hanging-process" reporter. See https://vitest.dev/config/#reporters
